<!DOCTYPE html>  
<html lang="es">  

<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Carga Horarios</title>  
    <style>   
        body {  
            font-family: Arial, sans-serif;  
            margin: 0;  
            padding: 20px;  
            height: 100vh;  
            overflow: hidden;  
            background-image:  url('{{ url_for('static', filename='img/fondo_clinica.jpg') }}');
            background-size: cover;  
            position: relative;  
        }  

        h1 {  
            text-align: center;  
            color: black;  
            margin-bottom: 20px;  
        }  

        .form-container {  
            max-width: 800px;  
            width: 100%;  
            margin: 0 auto;  
            padding: 20px;  
            background: linear-gradient(to bottom, rgba(13, 110, 253, 0.8), white);  
            border-radius: 15px;  
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);  
        }  

        .form-container select,  
        .form-container input {  
            width: calc(50% - 10px);  
            padding: 10px;  
            margin-right: 10px;  
            margin-bottom: 10px;  
            border: 1px solid #ccc;  
            border-radius: 5px;  
        }  

        .form-container button {  
            padding: 10px 15px;  
            background-color: #28a745;  
            color: white;  
            border: none;  
            border-radius: 5px;  
            cursor: pointer;  
        }  

        .form-container button:hover {  
            background-color: #218838;  
        }  

        table {  
            width: 400px;  
            margin: 20px auto;  
            border-collapse: collapse;  
            background-color: rgba(255, 255, 255, 0.9);  
            border-radius: 8px;  
            overflow: hidden;  
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);  
        }    

        th, td {  
            border: 1px solid #ddd;  
            padding: 10px;  
            text-align: center;  
            color: black;  
        }  

        .reserved {  
            background-color: #007bff;  
            color: white;  
        }  
    </style>     
</head>  

<body>  
    <div>
    <h1>Cargar Horarios</h1>  
    <label for="dias">Días:</label>
    <div class="form-container" style="text-align:center;">  
        <select id="dias" required>  
            <option value="">Selecciona un día</option>  
            <option value="Lunes">Lunes</option>  
            <option value="Martes">Martes</option>  
            <option value="Miércoles">Miércoles</option>  
            <option value="Jueves">Jueves</option>  
            <option value="Viernes">Viernes</option>  
        </select>  
        <label for="h_entrada">Hora de Entrada:</label>
        <input type="time" id="h_entrada" required>  
        <label for="h_salida">Hora de Salida:</label>
        <input type="time" id="h_salida" required>  
        <br>
        <div style="margin-top: 10px; text-align: center;">
        <button onclick="boton()">Reservar Horario</button>  
        </div>
    </div>  
</div>
    <table id="table">  
        <thead>  
            <tr>  
                <th>Día</th>  
                <th>Horario</th>  
                <th>Accion</th>  
            </tr>  
        </thead>  
        <tbody>  
            <!-- Aquí se mostrarán los bloques de horarios reservados -->  
        </tbody>  
    </table>  

    <script>  
      function boton() {  
          const day = document.getElementById('dias').value;  
          const h_entrada = document.getElementById('h_entrada').value;  
          const h_salida = document.getElementById('h_salida').value;  

          if (day && h_entrada && h_salida) {  
              const table = document.getElementById('table').getElementsByTagName('tbody')[0];  

              const rows = table.getElementsByTagName('tr');  
              for (let i = 0; i < rows.length; i++) {  
                  const existingDay = rows[i].cells[0].innerText;  
                  if (existingDay === day) {  
                      alert('Ya existe un horario reservado para este día. Solo se permite una reserva por día.');  
                      return;  
                  }  
              }  

              const newRow = table.insertRow();  
              const dayCell = newRow.insertCell(0);  
              const timeCell = newRow.insertCell(1);  
              const actionCell = newRow.insertCell(2);  
              dayCell.innerText = day;  
              timeCell.innerText = `${h_entrada} - ${h_salida}`;  
              timeCell.className = 'reserved';  

              const editButton = document.createElement('button');  
              editButton.innerText = 'Editar';  
              editButton.onclick = function() {  
                  tabla(newRow);  
              };  
              actionCell.appendChild(editButton);  

              document.getElementById('dias').value = '';  
              document.getElementById('h_entrada').value = '';  
              document.getElementById('h_salida').value = '';  
          } else {  
              alert('Por favor, selecciona un día y ambos horarios.');  
          }  
      }  

      function tabla(row) {  
          const day = row.cells[0].innerText;  
          const times = row.cells[1].innerText.split(' - ');  
          const h_entrada = times[0];  
          const h_salida = times[1];  

          document.getElementById('dias').value = day;  
          document.getElementById('h_entrada').value = h_entrada;  
          document.getElementById('h_salida').value = h_salida;  

          row.parentNode.removeChild(row);  
      }  
    </script>  

</body>  
</html>  